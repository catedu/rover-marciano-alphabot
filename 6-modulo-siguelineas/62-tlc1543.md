# TLC1543
Este robot no nos lo pone f√°cil con el siguel√≠neas ¬øPor qu√©? Porque los 5 sensores (IR1..IR5) est√°n conectados **a un conversor anal√≥gico digital TLC1543** tal y como puedes ver en [su esquema el√©ctrico](https://www.waveshare.com/w/upload/b/b1/AlphaBot_Schematic.pdf):

![](/assets/tlc1543-1.png)

## ¬øC√≥mo est√° conectado con GPIO?
Pues con estos n√∫meros:
* CS  en GPIO 5
* Clock en GPIO 25
* Address en GPIO 24
* DataOut en GPIO 23

## ¬øC√≥mo funciona este chip?
Pues l√©ete [su manual de instrucciones](https://www.ti.com/lit/ds/symlink/tlc1543.pdf) ü•±ü•±üò¥ aburrido ¬øverdad?

Te lo resumimos :

1. Este chip se activa por nivel bajo del **CS**.
1. En ese momento LEE LA DIRECCI√ìN definida por **ADDRESS** (_empezando por el bit m√°s alto MSB)_ donde ADDRESS es un n√∫mero entre 0 y 4 en binario que corresponde canal o sensor infrarrojo que se quiere leer A0 hasta A4 (que corresponden a los sensores IR1 hasta IR5).
1. Los primeros 4 pulsos de **CLOCK** son para leer ADDRESS (_en el flanco de subida_). En la ilustraci√≥n Accesss Cycle B.
1. Los otros 6 _no valen para nada_. En la ilustraci√≥n Sample Cycle B.
1. Los siguientes 10 pulsos se emite por **DATAOUT** (_empezando por el bit m√°s alto MSB)_ el valor le√≠do del sensor de infrarojos que has seleccionado en ADDRESS. En la ilustraci√≥n Previous Conversion Data, es decir, est√° sacando la conversi√≥n de los valores leidos anteriormente que no est√°n en la ilustraci√≥n.

>Mentirijillas:
Realmente el punto 4 no es verdad, lo que pasa es que si has leido el punto 5 durante los 10 pulsos de reloj est√° sacando la lectura del IR definido por ADDRESS de los 10 anteriores. Lo que es verdad es que la primera lectura de todas, esos 6 pulsos no valen para nada.



![](/assets/tlc1543-2.png)

*[Extraido del Datacheet](https://www.ti.com/lit/ds/symlink/tlc1543.pdf)*

* Los 4 primeros pulsos de reloj por flanco de subida leen ADDRESS: B3 B2 B1 y B0 mientras tanto por DATAOUT est√° sacando los valores A9..A0 definido en una anterior ADDRESS que no vemos (los 10 primeros pulsos de CLOCK no tiene sentido esos valores de DOUT).

* Los rayados significan que igual da lo que haya pues no lo lee. Por ejemplo entre el pulso 5 y 10 del rejoj, no se est√° leyendo ADDRESS.

* Si te fijas, en los siguientes 10 pulsos de CLOCK (s√≥lo aparece el primer pulso) ya empieza a salir por DATAOUT los valores del sensor definidos en ADDRESS como B3B2B1B0.

* Entre 10 pulsos de reloj y los otros 10 se necesita un tiempo de conversi√≥n A/D Conversion interval.
